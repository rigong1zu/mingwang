import{c as B,G as K,r as c,c7 as H,j as e,P as _,c8 as A,c9 as pe,ca as me,cb as he,cc as $,cd as xe,ce as ge,cf as ye,cg as fe,n as G,ch as je,b5 as R,b6 as M,ci as T,cj as w,u as N,d as S,m as ve,ck as be,B as b,b9 as we,cl as Ne,cm as ke,bq as Ce,b2 as Re,cn as Me,co as Se,cp as De,X as k,bd as E,I as F,i as Ee,bR as Pe,bS as Ae,bT as Ie,bU as Ye,bV as _e,bW as Ge,bX as Te,bY as qe,cq as W,cr as Oe,bu as X,e as Fe,bZ as P,cs as Le,ct as ze,cu as Ve,c1 as Ue,bF as Be,cv as Ke,cw as He,bD as D,bE as $e,bm as L,bn as z,cx as We,bo as Xe,cy as Qe,bg as Je,bh as Ze,bi as es,bj as ss,bk as as,bl as ts,J as ns,K as rs,O as os,Q as ls}from"./index.b12a37b1.js";import{T as cs,a as is,b as V,c as v,d as us}from"./table.ee96bcb4.js";import{O as U}from"./OperationAction.af8e5ae6.js";import{d as ds,e as ps}from"./hook.04a71eda.js";import{A as ms}from"./activity.591f45b2.js";import{S as hs}from"./settings-2.e91964a4.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=B("KanbanSquareDashed",[["path",{d:"M8 7v7",key:"1x2jlm"}],["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M16 7v9",key:"1hp2iy"}],["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M21 14v1",key:"169vum"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M3 9v1",key:"1r0deq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=B("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var q="Radio",[ys,Q]=K(q),[fs,js]=ys(q),J=c.forwardRef((s,a)=>{const{__scopeRadio:n,name:r,checked:l=!1,required:t,disabled:d,value:i="on",onCheck:u,form:g,...y}=s,[x,f]=c.useState(null),p=H(a,o=>f(o)),m=c.useRef(!1),h=x?g||!!x.closest("form"):!0;return e.jsxs(fs,{scope:n,checked:l,disabled:d,children:[e.jsx(_.button,{type:"button",role:"radio","aria-checked":l,"data-state":se(l),"data-disabled":d?"":void 0,disabled:d,value:i,...y,ref:p,onClick:A(s.onClick,o=>{l||u==null||u(),h&&(m.current=o.isPropagationStopped(),m.current||o.stopPropagation())})}),h&&e.jsx(vs,{control:x,bubbles:!m.current,name:r,value:i,checked:l,required:t,disabled:d,form:g,style:{transform:"translateX(-100%)"}})]})});J.displayName=q;var Z="RadioIndicator",ee=c.forwardRef((s,a)=>{const{__scopeRadio:n,forceMount:r,...l}=s,t=js(Z,n);return e.jsx(pe,{present:r||t.checked,children:e.jsx(_.span,{"data-state":se(t.checked),"data-disabled":t.disabled?"":void 0,...l,ref:a})})});ee.displayName=Z;var vs=s=>{const{control:a,checked:n,bubbles:r=!0,...l}=s,t=c.useRef(null),d=me(n),i=he(a);return c.useEffect(()=>{const u=t.current,g=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(g,"checked").set;if(d!==n&&x){const f=new Event("click",{bubbles:r});x.call(u,n),u.dispatchEvent(f)}},[d,n,r]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...l,tabIndex:-1,ref:t,style:{...s.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function se(s){return s?"checked":"unchecked"}var bs=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],O="RadioGroup",[ws,Hs]=K(O,[$,Q]),ae=$(),te=Q(),[Ns,ks]=ws(O),ne=c.forwardRef((s,a)=>{const{__scopeRadioGroup:n,name:r,defaultValue:l,value:t,required:d=!1,disabled:i=!1,orientation:u,dir:g,loop:y=!0,onValueChange:x,...f}=s,p=ae(n),m=xe(g),[h,o]=ge({prop:t,defaultProp:l,onChange:x});return e.jsx(Ns,{scope:n,name:r,required:d,disabled:i,value:h,onValueChange:o,children:e.jsx(ye,{asChild:!0,...p,orientation:u,dir:m,loop:y,children:e.jsx(_.div,{role:"radiogroup","aria-required":d,"aria-orientation":u,"data-disabled":i?"":void 0,dir:m,...f,ref:a})})})});ne.displayName=O;var re="RadioGroupItem",oe=c.forwardRef((s,a)=>{const{__scopeRadioGroup:n,disabled:r,...l}=s,t=ks(re,n),d=t.disabled||r,i=ae(n),u=te(n),g=c.useRef(null),y=H(a,g),x=t.value===l.value,f=c.useRef(!1);return c.useEffect(()=>{const p=h=>{bs.includes(h.key)&&(f.current=!0)},m=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",m)}},[]),e.jsx(fe,{asChild:!0,...i,focusable:!d,active:x,children:e.jsx(J,{disabled:d,required:t.required,checked:x,...u,...l,name:t.name,ref:y,onCheck:()=>t.onValueChange(l.value),onKeyDown:A(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:A(l.onFocus,()=>{var p;f.current&&((p=g.current)==null||p.click())})})})});oe.displayName=re;var Cs="RadioGroupIndicator",le=c.forwardRef((s,a)=>{const{__scopeRadioGroup:n,...r}=s,l=te(n);return e.jsx(ee,{...l,...r,ref:a})});le.displayName=Cs;var ce=ne,ie=oe,Rs=le;const ue=c.forwardRef(({className:s,...a},n)=>e.jsx(ce,{className:G("grid gap-2",s),...a,ref:n}));ue.displayName=ce.displayName;const de=c.forwardRef(({className:s,...a},n)=>e.jsx(ie,{ref:n,className:G("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Rs,{className:"flex items-center justify-center",children:e.jsx(je,{className:"h-2.5 w-2.5 fill-current text-current"})})}));de.displayName=ie.displayName;async function Ms(){try{return(await R.get("/admin/charge/list")).data}catch(s){return{status:!1,error:M(s),data:[]}}}async function Ss(s){try{return(await R.post("/admin/charge/set",s)).data}catch(a){return{status:!1,error:M(a)}}}async function Ds(s){try{return(await R.get(`/admin/charge/delete/${s}`)).data}catch(a){return{status:!1,error:M(a)}}}async function Es(s){try{return(await R.post("/admin/charge/sync",s)).data}catch(a){return{status:!1,error:M(a)}}}const Ps=[{models:["gpt-3.5-turbo","gpt-3.5-turbo-0301","gpt-3.5-turbo-0613","gpt-3.5-turbo-instruct"],input:.0015,output:.002},{models:["gpt-3.5-turbo-1106"],input:.001,output:.002},{models:["gpt-3.5-turbo-0125"],input:5e-4,output:.0015},{models:["gpt-3.5-turbo-16k","gpt-3.5-turbo-16k-0301","gpt-3.5-turbo-16k-0613"],input:.003,output:.004},{models:["gpt-4","gpt-4-0314","gpt-4-0613"],input:.03,output:.06},{models:["gpt-4-1106-preview","gpt-4-0125-preview","gpt-4-turbo-preview","gpt-4-1106-vision-preview","gpt-4-vision-preview","gpt-4-turbo","gpt-4-turbo-2024-04-09"],input:.01,output:.03},{models:["gpt-4o","gpt-4o-2024-05-13","chatgpt-4o-latest"],input:.005,output:.015},{models:["gpt-4o-2024-08-06"],input:.0025,output:.01},{models:["gpt-4o-mini","gpt-4o-mini-2024-07-18"],input:15e-5,output:6e-4},{models:["gpt-4-32k","gpt-4-32k-0314","gpt-4-32k-0613"],input:.06,output:.12},{models:["dalle","dall-e-2"],output:.018,billing_type:w},{models:["dall-e-3"],output:.08,billing_type:w},{models:["claude-1","claude-1-100k","claude-1.2","claude-1.3","claude-instant","claude-instant-1.2","claude-slack"],input:8e-4,output:.0024},{models:["claude-2","claude-2-100k","claude-2.1"],input:.008,output:.024},{models:["claude-3-haiku-20240307"],input:25e-5,output:.00125},{models:["claude-3-sonnet-20240229"],input:.003,output:.015},{models:["claude-3-opus-20240229"],input:.015,output:.075},{models:["midjourney"],output:.1,currency:"CNY",billing_type:w},{models:["midjourney-fast"],output:.2,currency:"CNY",billing_type:w},{models:["midjourney-turbo"],output:.5,currency:"CNY",billing_type:w},{models:["spark-desk-lite"],input:.001,output:.001,currency:"CNY"},{models:["spark-desk-pro","spark-desk-pro-128k","spark-desk-max"],input:.03,output:.03,currency:"CNY"},{models:["spark-desk-max-32k"],input:.032,output:.032,currency:"CNY"},{models:["spark-desk-4.0-ultra"],input:.1,output:.1,currency:"CNY"},{models:["moonshot-v1-8k"],input:.012,output:.012,currency:"CNY"},{models:["moonshot-v1-32k"],input:.024,output:.024,currency:"CNY"},{models:["moonshot-v1-128k"],input:.06,output:.06,currency:"CNY"},{models:["glm-4","glm-4v"],input:.1,output:.1,currency:"CNY"},{models:["zhipu-chatglm-lite","zhipu-chatglm-std","zhipu-chatglm-turbo","glm-3-turbo"],input:.005,output:.005,currency:"CNY"},{models:["zhipu-chatglm-pro"],input:.01,output:.01,currency:"CNY"},{models:["qwen-plus","qwen-plus-net"],input:.02,output:.02,currency:"CNY"},{models:["qwen-turbo","qwen-turbo-net"],input:.008,output:.008,currency:"CNY"},{models:["chat-bison-001"],output:.001},{models:["gemini-pro","gemini-pro-vision","gemini-1.5-pro-latest","gemini-1.5-flash-latest"],input:125e-6,output:375e-6},{models:["hunyuan"],input:.1,output:.1,currency:"CNY"},{models:["deepseek-chat","deepseek-coder"],input:.001,output:.002,currency:"CNY"},{models:["360-gpt-v9"],input:.12,output:.12,currency:"CNY"},{models:["baichuan-53b"],input:.02,output:.02,currency:"CNY"},{models:["skylark-lite-public"],input:.004,output:.004,currency:"CNY"},{models:["skylark-plus-public"],input:.008,output:.008,currency:"CNY"},{models:["skylark-pro-public","skylark-chat"],input:.011,output:.011,currency:"CNY"},{models:["llama2-70b-4096","mixtral-8x7b-32768","gemma-7b-it"],output:.001,currency:"USD"}],I=(s,a,n)=>{const r=s??0;switch(a??"USD"){case"CNY":return r*10;case"USD":return r*10*(n??1);default:return I(r,"USD",n)}},As=s=>Ps.map((a,n)=>({id:n,models:a.models,type:a.billing_type??T,anonymous:!1,input:I(a.input,a.currency,s),output:I(a.output,a.currency,s)})),Y={id:-1,type:be,models:[],anonymous:!1,input:0,output:0};function Is(s,a){switch(a.type){case"set":return{...a.payload};case"set-models":return{...s,models:a.payload};case"add-model":const n=a.payload.trim();return n.length===0||s.models.includes(n)?s:{...s,models:[...s.models,n]};case"toggle-model":return a.payload.trim().length===0?s:s.models.includes(a.payload)?{...s,models:s.models.filter(r=>r!==a.payload)}:{...s,models:[...s.models,a.payload]};case"remove-model":return{...s,models:s.models.filter(r=>r!==a.payload)};case"set-type":return{...s,type:a.payload};case"set-anonymous":return{...s,anonymous:a.payload};case"set-input":return{...s,input:a.payload};case"set-output":return{...s,output:a.payload};case"clear":return Y;case"clear-param":return{...Y,id:s.id};default:return s}}function Ys(s){switch(s.models=s.models.map(a=>a.trim()).filter(a=>a.length>0),s.type){case W:s.input=0,s.output=0;break;case w:s.input=0,s.anonymous=!1;break;case T:s.anonymous=!1;break}return s.input<0&&(s.input=0),s.output<0&&(s.output=0),s}function _s({builtin:s,current:a,open:n,setOpen:r,onRefresh:l}){const{t}=N(),{toast:d}=S(),[i,u]=c.useState([]),[g,y]=c.useState(!1),[x,f]=c.useState(!1),p=c.useMemo(()=>i.flatMap(h=>h.models),[i]),m=c.useMemo(()=>x?p:p.filter(h=>!a.includes(h)),[x,p,a]);return e.jsxs(e.Fragment,{children:[e.jsx(L,{type:z.Number,title:t("admin.charge.sync-builtin"),name:t("admin.charge.usd-currency"),open:n&&s,setOpen:r,defaultValue:"7.1",onSubmit:async h=>{const o=We(h),j=As(o);return u(j),y(!0),!0}}),e.jsx(L,{type:z.Text,title:t("admin.charge.sync"),name:t("admin.charge.sync-site"),placeholder:t("admin.charge.sync-placeholder"),open:n&&!s,setOpen:r,defaultValue:"https://api.chatnio.net",alert:t("admin.chatnio-format-only"),onSubmit:async h=>{const o=Xe("/v1/charge",{endpoint:h}),j=await Qe({endpoint:h});return j.length===0?(d({title:t("admin.charge.sync-failed"),description:t("admin.charge.sync-failed-prompt",{endpoint:o})}),!1):(u(j),y(!0),!0)}}),e.jsx(Je,{open:g,onOpenChange:y,children:e.jsxs(Ze,{children:[e.jsxs(es,{children:[e.jsx(ss,{children:t("admin.charge.sync-option")}),e.jsx(as,{className:"pt-1.5",children:t("admin.charge.sync-prompt",{length:p.length,influence:m.length})})]}),e.jsxs("div",{className:"pt-1 flex flex-row items-center justify-center",children:[e.jsx("span",{className:"mr-4 whitespace-nowrap",children:t("admin.charge.sync-overwrite")}),e.jsx(X,{checked:x,onCheckedChange:f})]}),e.jsxs(ts,{children:[e.jsx(b,{variant:"outline",onClick:()=>{y(!1),u([])},children:t("cancel")}),e.jsx(b,{loading:!0,variant:x?"destructive":"default",onClick:async()=>{const h=await Es({data:i,overwrite:x});D(d,t,h,!0),h.status&&(r(!1),y(!1),u([]),l())},children:t("admin.charge.sync-confirm")})]})]})})]})}function Gs({loading:s,onRefresh:a,currentModels:n}){const{t:r}=N(),[l,t]=c.useState(!1),[d,i]=c.useState(!1),u=g=>{i(g),t(!0)};return e.jsxs("div",{className:"flex flex-row w-full h-max",children:[e.jsx(_s,{builtin:d,onRefresh:a,current:n,open:l,setOpen:t}),e.jsxs(b,{variant:"default",className:"mr-2",onClick:()=>u(!0),children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),r("admin.charge.sync-builtin")]}),e.jsxs(b,{variant:"outline",onClick:()=>u(!1),children:[e.jsx(ms,{className:"w-4 h-4 mr-2"}),r("admin.charge.sync")]}),e.jsx("div",{className:"grow"}),e.jsx(b,{variant:"outline",size:"icon",onClick:a,children:e.jsx(we,{className:G("w-4 h-4",s&&"animate-spin")})})]})}function Ts({models:s,onClick:a}){const{t:n}=N();return s.length>0&&e.jsxs(Ne,{className:"charge-alert",children:[e.jsxs(ke,{className:"flex flex-row items-center select-none",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2"}),e.jsx("p",{children:n("admin.charge.unused-model")}),e.jsx(Re,{content:n("admin.charge.unused-model-tip")})]}),e.jsx(Me,{className:"model-list",children:s.map((r,l)=>e.jsx("div",{className:"model cursor-pointer select-none",onClick:()=>a(r),children:r},l))})]})}function qs({form:s,dispatch:a,onRefresh:n,usedModels:r,allModels:l}){const{t}=N(),{toast:d}=S(),[i,u]=c.useState(""),g=c.useMemo(()=>Se([...l,...ps]),[l]),y=c.useMemo(()=>g.filter(o=>!s.models.includes(o)&&!r.includes(o)&&o.trim()!==""),[s.models,r]),x=c.useMemo(()=>i.trim()!==""?!1:s.models.length===0,[i,s.models]),[f,p]=c.useState(!1);async function m(){const o=i.trim(),j=Ys({...s});o!==""&&!j.models.includes(o)&&(j.models=[o,...j.models],u(""));const C=await Ss(j);D(d,t,C,!0),C.status&&h(),n()}function h(){a({type:"clear"}),u("")}return e.jsxs("div",{className:"charge-editor",children:[e.jsx("div",{className:"w-full h-max mb-5",children:e.jsx(ue,{value:s.type,onValueChange:o=>a({type:"set-type",payload:o}),className:"flex flex-row gap-5 whitespace-nowrap flex-wrap",children:De.map((o,j)=>e.jsxs("div",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(de,{className:"transition-all duration-200",value:o,id:o}),e.jsx(k,{htmlFor:o,className:"cursor-pointer",children:t(`admin.charge.${o}`)})]},j))})}),e.jsxs("div",{className:"flex flex-row w-full h-max mb-4",children:[e.jsx(b,{onClick:()=>{a({type:"add-model",payload:i}),u("")},size:"icon",className:"mr-2 shrink-0",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx(F,{value:i,onChange:o=>u(o.target.value),placeholder:t("admin.channels.model"),onKeyDown:o=>{Ee(o)&&(a({type:"add-model",payload:i}),u(""))}}),e.jsxs(Pe,{children:[e.jsx(Ae,{asChild:!0,children:e.jsx(b,{size:"icon",className:"ml-2 shrink-0",children:e.jsx(Ie,{className:"w-4 h-4"})})}),e.jsx(Ye,{align:"end",asChild:!0,children:e.jsxs(_e,{children:[e.jsx(Ge,{placeholder:t("admin.channels.search-model")}),e.jsx(Te,{className:"thin-scrollbar",children:y.map((o,j)=>e.jsx(qe,{value:o,onSelect:C=>a({type:"add-model",payload:C}),className:"px-2",children:o},j))})]})})]})]}),e.jsx("div",{className:"flex flex-col w-full h-max mb-2",children:s.models.map((o,j)=>e.jsxs("div",{className:"flex flex-row w-full h-max shrink-0 mb-2 select-none",children:[e.jsx(F,{value:o,readOnly:!0}),e.jsx(b,{onClick:()=>a({type:"remove-model",payload:o}),size:"icon",variant:"outline",className:"ml-2 shrink-0",children:e.jsx(gs,{className:"w-4 h-4"})})]},j))}),s.type===W&&e.jsxs("div",{className:"flex flex-row w-full h-max items-center mt-4 mb-6",children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),e.jsx(k,{className:"grow",children:t("admin.charge.anonymous")}),e.jsx(X,{checked:s.anonymous,onCheckedChange:o=>a({type:"set-anonymous",payload:o})})]}),s.type===w&&e.jsxs("div",{className:"flex flex-row w-full h-max items-center",children:[e.jsx(Fe,{className:"w-4 h-4 mr-2"}),e.jsx(k,{className:"grow",children:t("admin.charge.time-count")}),e.jsx(P,{value:s.output,onValueChange:o=>a({type:"set-output",payload:o}),acceptNegative:!1,className:"w-20",min:0,max:99999})]}),s.type===T&&e.jsxs("div",{className:"flex flex-col w-full h-max gap-2",children:[e.jsxs("div",{className:"flex flex-row w-full h-max items-center",children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),e.jsxs(k,{className:"grow",children:[t("admin.charge.input-count"),e.jsx("span",{className:"token",children:" / 1k tokens"})]}),e.jsx(P,{value:s.input,onValueChange:o=>a({type:"set-input",payload:o}),acceptNegative:!1,className:"w-20",min:0,max:99999})]}),e.jsxs("div",{className:"flex flex-row w-full h-max items-center",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),e.jsxs(k,{className:"grow",children:[t("admin.charge.output-count"),e.jsx("span",{className:"token",children:" / 1k tokens"})]}),e.jsx(P,{value:s.output,onValueChange:o=>a({type:"set-output",payload:o}),acceptNegative:!1,className:"w-20",min:0,max:99999})]})]}),e.jsxs("div",{className:"flex flex-row w-full h-max mt-5 gap-2 items-center flex-wrap",children:[e.jsxs("div",{className:"object-id",children:[e.jsx("span",{className:"mr-2",children:"ID"}),s.id===-1?e.jsx(E,{className:"w-3 h-3"}):e.jsx("span",{className:"id",children:s.id})]}),e.jsx("div",{className:"grow"}),e.jsx(b,{variant:"outline",size:"icon",className:"shrink-0",onClick:h,children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsx(b,{disabled:x,onClick:m,loading:!0,onLoadingChange:p,className:"whitespace-nowrap shrink-0",children:s.id===-1?e.jsxs(e.Fragment,{children:[!f&&e.jsx(E,{className:"w-4 h-4 mr-2"}),t("admin.charge.add-rule")]}):e.jsxs(e.Fragment,{children:[!f&&e.jsx(Ue,{className:"w-4 h-4 mr-2"}),t("admin.charge.update-rule")]})})]})]})}function Os({data:s,dispatch:a,onRefresh:n}){const{t:r}=N(),{toast:l}=S();return e.jsx("div",{className:"charge-table",children:e.jsxs(cs,{classNameWrapper:"table",children:[e.jsx(is,{children:e.jsxs(V,{className:"select-none whitespace-nowrap",children:[e.jsx(v,{children:r("admin.charge.id")}),e.jsx(v,{children:r("admin.charge.type")}),e.jsx(v,{children:r("admin.charge.model")}),e.jsx(v,{children:r("admin.charge.input")}),e.jsx(v,{children:r("admin.charge.output")}),e.jsx(v,{children:r("admin.charge.support-anonymous")}),e.jsx(v,{children:r("admin.charge.action")})]})}),e.jsx(us,{children:s.map((t,d)=>e.jsxs(V,{children:[e.jsx(v,{className:"charge-id",children:t.id}),e.jsx(v,{children:e.jsx(Be,{className:"whitespace-nowrap",children:r(`admin.charge.${t.type}`)})}),e.jsx(v,{children:e.jsx("pre",{children:t.models.join(`
`)})}),e.jsx(v,{children:t.input===0?0:t.input.toFixed(3)}),e.jsx(v,{children:t.output===0?0:t.output.toFixed(3)}),e.jsx(v,{children:r(String(t.anonymous))}),e.jsx(v,{children:e.jsxs("div",{className:"inline-flex flex-row flex-wrap gap-2",children:[e.jsx(U,{tooltip:r("admin.channels.edit"),onClick:async()=>{const i={...t};a({type:"set",payload:i}),Ke(He(".admin-content > .scrollarea-viewport"))},children:e.jsx(hs,{className:"h-4 w-4"})}),e.jsx(U,{tooltip:r("admin.channels.delete"),variant:"destructive",onClick:async()=>{const i=await Ds(t.id);D(l,r,i,!0),n()},children:e.jsx($e,{className:"h-4 w-4"})})]})})]},d))})]})})}function Fs(){const{t:s}=N(),{toast:a}=S(),[n,r]=c.useState([]),[l,t]=c.useReducer(Is,Y),[d,i]=c.useState(!1),{allModels:u,update:g}=ds(),y=c.useMemo(()=>n.flatMap(m=>m.models),[n]),x=c.useMemo(()=>n.flatMap(m=>m.models),[n]),f=c.useMemo(()=>d?[]:u.filter(m=>!x.includes(m)&&m.trim()!==""),[d,u,x]);async function p(m){i(!0);const h=await Ms();m||await g(),i(!1),D(a,s,h),r(h.data)}return ve(async()=>await p(!0),[]),e.jsxs("div",{className:"charge-widget",children:[e.jsx(Gs,{loading:d,onRefresh:p,currentModels:y}),e.jsx(Ts,{models:f,onClick:m=>t({type:"toggle-model",payload:m})}),e.jsx(qs,{onRefresh:p,form:l,dispatch:t,allModels:u,usedModels:x}),e.jsx(Os,{data:n,dispatch:t,onRefresh:p})]})}function $s(){const{t:s}=N();return e.jsx("div",{className:"charge",children:e.jsxs(ns,{className:"admin-card charge-card",children:[e.jsx(rs,{className:"select-none",children:e.jsx(os,{children:s("admin.prize")})}),e.jsx(ls,{children:e.jsx(Fs,{})})]})})}export{$s as default};
