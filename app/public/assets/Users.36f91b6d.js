import{c as D,r as c,j as e,n as q,cz as qe,C as Pe,cA as Te,cB as me,u as _,bF as I,d as F,m as ae,cC as xe,cD as ue,cE as pe,bD as he,bE as je,L as se,B as v,b9 as ne,bg as A,c2 as ge,bh as H,bi as B,bj as U,bk as G,I as L,bl as K,Y as Ne,cF as we,cG as ve,i as De,bT as _e,b2 as R,b as Le,cH as Ee,bm as S,bn as O,cI as de,cx as re,bR as Fe,bS as Ve,bU as ze,cJ as C,cK as Ie,$ as Ae,cL as He,a2 as Be,J as Z,K as Y,O as W,Q as X}from"./index.b12a37b1.js";import{T as te,a as ie,b as E,e as d,d as ce,c as r}from"./table.ee96bcb4.js";import{f as Ue,h as Ge,i as Ke,u as Qe,j as $e,q as oe,s as Je,k as Ze,r as Ye,l as We,m as Xe,n as Re,o as ea,p as aa,t as sa}from"./chart.e41865ab.js";import{O as ye}from"./OperationAction.af8e5ae6.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=D("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=D("CalendarOff",[["path",{d:"M4.18 4.18A2 2 0 0 0 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 1.82-1.18",key:"1feomx"}],["path",{d:"M21 15.5V6a2 2 0 0 0-2-2H9.5",key:"yhw86o"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h7",key:"1wap6i"}],["path",{d:"M21 10h-5.5",key:"quycpq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=D("CloudFog",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=D("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=D("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=D("MinusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=D("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=D("ShieldMinus",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]),be=({className:a,...s})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:q("mx-auto flex w-full justify-center",a),...s});be.displayName="Pagination";const Ce=c.forwardRef(({className:a,...s},n)=>e.jsx("ul",{ref:n,className:q("flex flex-row items-center gap-1",a),...s}));Ce.displayName="PaginationContent";const f=c.forwardRef(({className:a,...s},n)=>e.jsx("li",{ref:n,className:q("cursor-pointer select-none",a),...s}));f.displayName="PaginationItem";const T=({className:a,isActive:s,size:n="icon",...m})=>e.jsx("a",{"aria-current":s?"page":void 0,className:q(qe({variant:s?"outline":"ghost",size:n}),a),...m});T.displayName="PaginationLink";const ke=({className:a,...s})=>e.jsx(T,{"aria-label":"Go to previous page",size:"icon",className:q("gap-1",a),...s,children:e.jsx(Pe,{className:"h-4 w-4"})});ke.displayName="PaginationPrevious";const fe=({className:a,...s})=>e.jsx(T,{"aria-label":"Go to next page",size:"icon",className:q("gap-1",a),...s,children:e.jsx(Te,{className:"h-4 w-4"})});fe.displayName="PaginationNext";const ee=({className:a,...s})=>e.jsx("span",{"aria-hidden":!0,className:q("flex h-9 w-9 items-center justify-center",a),...s,children:e.jsx(me,{className:"h-4 w-4"})});ee.displayName="PaginationEllipsis";const Q=({current:a,total:s,offset:n=!1,className:m,onPageChange:l,children:g,...x})=>{const h=a+(n?1:0),o=s-h,t=a>0,p=o>=1,i=a>1&&!p,y=o>=2&&!t,k=o>2,P=h>2&&!k;return e.jsx(be,{className:q("py-4",m),...x,children:e.jsxs(Ce,{children:[e.jsx(f,{onClick:()=>t&&l(a-1),children:e.jsx(ke,{})}),P&&e.jsx(f,{children:e.jsx(ee,{})}),i&&e.jsx(f,{onClick:()=>l(a-2),children:e.jsx(T,{children:h-2})}),t&&e.jsx(f,{onClick:()=>l(a-1),children:e.jsx(T,{children:h-1})}),e.jsx(f,{children:e.jsx(T,{isActive:!0,children:h})}),p&&e.jsx(f,{onClick:()=>l(a+1),children:e.jsx(T,{children:h+1})}),y&&e.jsx(f,{onClick:()=>l(a+2),children:e.jsx(T,{children:h+2})}),k&&e.jsx(f,{children:e.jsx(ee,{})}),e.jsx(f,{onClick:()=>p&&l(a+1),children:e.jsx(fe,{})})]})})};Q.displayName="PaginationAction";function Se({state:a}){const{t:s}=_();return e.jsx(I,{variant:"outline",children:s(`admin.used-${a}`)})}function ma({update:a}){const{t:s}=_(),{toast:n}=F(),[m,l]=c.useState(!1),[g,x]=c.useState(""),[h,o]=c.useState("5"),[t,p]=c.useState("1"),[i,y]=c.useState("");function k(w){return w.replace(/[^\d.]/g,"")}async function P(){const w=await Ke(g,Number(h),Number(t));w.status?(y(w.data.join(`
`)),a()):n({title:s("admin.error"),description:w.message})}function N(){x(""),o("5"),p("1"),l(!1),y("")}function V(){return ve("invitation.txt",i)}return e.jsxs(e.Fragment,{children:[e.jsxs(A,{open:m,onOpenChange:l,children:[e.jsx(ge,{asChild:!0,children:e.jsx(v,{children:s("admin.generate")})}),e.jsxs(H,{children:[e.jsxs(B,{children:[e.jsx(U,{children:s("admin.generate")}),e.jsxs(G,{className:"pt-2",children:[e.jsxs("div",{className:"invitation-row",children:[e.jsx("p",{className:"mr-4",children:s("admin.type")}),e.jsx(L,{value:g,onChange:w=>x(w.target.value)})]}),e.jsxs("div",{className:"invitation-row",children:[e.jsx("p",{className:"mr-4",children:s("admin.quota")}),e.jsx(L,{value:h,onChange:w=>o(k(w.target.value))})]}),e.jsxs("div",{className:"invitation-row",children:[e.jsx("p",{className:"mr-4",children:s("admin.number")}),e.jsx(L,{value:t,onChange:w=>p(k(w.target.value))})]})]})]}),e.jsxs(K,{children:[e.jsx(v,{variant:"outline",onClick:()=>l(!1),children:s("admin.cancel")}),e.jsx(v,{variant:"default",loading:!0,onClick:P,children:s("admin.confirm")})]})]})]}),e.jsx(A,{open:i!=="",onOpenChange:w=>{w||N()},children:e.jsxs(H,{children:[e.jsxs(B,{children:[e.jsx(U,{children:s("admin.generate-result")}),e.jsx(G,{className:"pt-4",children:e.jsx(Ne,{value:i,rows:12,readOnly:!0})})]}),e.jsxs(K,{children:[e.jsx(v,{variant:"outline",onClick:N,children:s("close")}),e.jsxs(v,{variant:"default",onClick:V,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),s("download")]})]})]})})]})}function xa(){const{t:a}=_(),{toast:s}=F(),[n,m]=c.useState({total:0,data:[]}),[l,g]=c.useState(!1),[x,h]=c.useState(0);async function o(){g(!0);const t=await Ge(x);g(!1),t.status?m(t):s({title:a("admin.error"),description:t.message})}return ae(o,[x]),e.jsxs("div",{className:"invitation-table",children:[n.data&&n.data.length>0||x>0?e.jsxs(e.Fragment,{children:[e.jsxs(te,{children:[e.jsx(ie,{children:e.jsxs(E,{className:"select-none whitespace-nowrap",children:[e.jsx(d,{children:a("admin.invitation-code")}),e.jsx(d,{children:a("admin.quota")}),e.jsx(d,{children:a("admin.type")}),e.jsx(d,{children:a("admin.used")}),e.jsx(d,{children:a("admin.used-username")}),e.jsx(d,{children:a("admin.created-at")}),e.jsx(d,{children:a("admin.used-at")}),e.jsx(d,{children:a("admin.action")})]})}),e.jsx(ce,{children:(n.data||[]).map((t,p)=>e.jsxs(E,{className:"whitespace-nowrap",children:[e.jsx(r,{children:t.code}),e.jsx(r,{children:e.jsx(I,{variant:"outline",children:t.quota})}),e.jsx(r,{children:e.jsx(I,{children:t.type})}),e.jsx(r,{children:e.jsx(Se,{state:t.used})}),e.jsx(r,{children:t.username||"-"}),e.jsx(r,{children:t.created_at}),e.jsx(r,{children:t.updated_at}),e.jsxs(r,{className:"flex gap-2",children:[e.jsx(xe,{size:"icon",variant:"outline",onClick:()=>ue(t.code),children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(ye,{native:!0,tooltip:a("delete"),variant:"destructive",onClick:async()=>{const i=await Ue(t.code);he(s,a,i,!0),i.status&&await o()},children:e.jsx(je,{className:"h-4 w-4"})})]})]},p))})]}),e.jsx(Q,{current:x,total:n.total,onPageChange:h,offset:!0})]}):e.jsx("div",{className:"empty",children:l?e.jsx(se,{className:"w-6 h-6 inline-block animate-spin"}):e.jsx("p",{children:a("admin.empty")})}),e.jsxs("div",{className:"invitation-action",children:[e.jsx("div",{className:"grow"}),e.jsx(v,{variant:"outline",size:"icon",onClick:o,children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(ma,{update:o})]})]})}const z=["normal","basic_plan","standard_plan","pro_plan"];function M(a,s,n){n.status?s({title:a("admin.operate-success"),description:a("admin.operate-success-prompt")}):s({title:a("admin.operate-failed"),description:a("admin.operate-failed-prompt",{reason:n.message||n.error})})}function ua({user:a,onRefresh:s}){const{t:n}=_(),{toast:m}=F(),l=Le(Ee),[g,x]=c.useState(!1),[h,o]=c.useState(!1),[t,p]=c.useState(!1),[i,y]=c.useState(!1),[k,P]=c.useState(!1),[N,V]=c.useState(!1),[w,le]=c.useState(!1),[Oe,$]=c.useState(!1),[Me,J]=c.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(S,{destructive:!0,type:O.Text,title:n("admin.password-action"),name:n("auth.password"),description:n("admin.password-action-desc"),open:g,setOpen:x,defaultValue:"",onSubmit:async u=>{const j=await Qe(a.id,u);return M(n,m,j),j.status&&(l===a.username&&location.reload(),s==null||s()),j.status}}),e.jsx(S,{destructive:!0,type:O.Text,title:n("admin.email-action"),name:n("admin.email"),description:n("admin.email-action-desc"),open:h,setOpen:o,defaultValue:a.email,onSubmit:async u=>{const j=await $e(a.id,u);return M(n,m,j),j.status&&(s==null||s()),j.status}}),e.jsx(S,{type:O.Number,title:n("admin.quota-action"),name:n("admin.quota"),description:n("admin.quota-action-desc"),defaultValue:"0",onValueChange:de,open:t,setOpen:p,componentProps:{acceptNegative:!0},onSubmit:async u=>{const j=re(u),b=await oe(a.id,j);return M(n,m,b),b.status&&(s==null||s()),b.status}}),e.jsx(S,{type:O.Number,title:n("admin.quota-set-action"),name:n("admin.quota"),description:n("admin.quota-set-action-desc"),defaultValue:a.quota.toFixed(2),onValueChange:de,open:i,setOpen:y,componentProps:{acceptNegative:!0},onSubmit:async u=>{const j=re(u),b=await oe(a.id,j,!0);return M(n,m,b),b.status&&(s==null||s()),b.status}}),e.jsx(S,{type:O.Clock,title:n("admin.subscription-action"),description:n("admin.subscription-action-desc",{username:a.username}),defaultValue:a.expired_at||"1970-01-01 00:00:00",open:k,setOpen:P,onSubmit:async u=>{const j=await Je(a.id,u);return M(n,m,j),j.status&&(s==null||s()),j.status}}),e.jsx(S,{type:O.List,title:n("admin.subscription-level"),name:n("admin.level"),description:n("admin.subscription-level-desc"),defaultValue:z[a.level],params:{dataList:z,dataListTranslated:"admin.identity"},open:N,setOpen:V,onSubmit:async u=>{const j=z.indexOf(u);console.log(j);const b=await Ze(a.id,j);return M(n,m,b),b.status&&(s==null||s()),b.status}}),e.jsx(S,{type:O.Empty,title:n("admin.release-subscription-action"),name:n("admin.release-subscription"),description:n("admin.release-subscription-action-desc"),open:w,setOpen:le,onSubmit:async()=>{const u=await Ye(a.id);return M(n,m,u),u.status&&(s==null||s()),u.status}}),e.jsx(S,{disabled:l===a.username,destructive:!0,type:O.Empty,title:a.is_banned?n("admin.unban-action"):n("admin.ban-action"),description:a.is_banned?n("admin.unban-action-desc"):n("admin.ban-action-desc"),open:Oe,setOpen:$,onSubmit:async()=>{const u=await We(a.id,!a.is_banned);return M(n,m,u),u.status&&(s==null||s()),u.status}}),e.jsx(S,{disabled:l===a.username,destructive:!0,type:O.Empty,title:a.is_admin?n("admin.cancel-admin-action"):n("admin.set-admin-action"),description:a.is_admin?n("admin.cancel-admin-action-desc"):n("admin.set-admin-action-desc"),open:Me,setOpen:J,onSubmit:async()=>{const u=await Xe(a.id,!a.is_admin);return M(n,m,u),u.status&&(s==null||s()),u.status}}),e.jsxs(Fe,{children:[e.jsx(Ve,{asChild:!0,children:e.jsx(v,{variant:"outline",size:"icon",children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsxs(ze,{className:"min-w-[8.75rem]",children:[e.jsxs(C,{onClick:()=>x(!0),children:[e.jsx(ca,{className:"h-4 w-4 mr-2"}),n("admin.password-action")]}),e.jsxs(C,{onClick:()=>o(!0),children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),n("admin.email-action")]}),a.is_banned?e.jsxs(C,{onClick:()=>$(!0),children:[e.jsx(ra,{className:"h-4 w-4 mr-2"}),n("admin.unban-action")]}):e.jsxs(C,{onClick:()=>$(!0),children:[e.jsx(da,{className:"h-4 w-4 mr-2"}),n("admin.ban-action")]}),a.is_admin?e.jsxs(C,{onClick:()=>J(!0),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),n("admin.cancel-admin-action")]}):e.jsxs(C,{onClick:()=>J(!0),children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),n("admin.set-admin-action")]}),e.jsxs(C,{onClick:()=>p(!0),children:[e.jsx(ia,{className:"h-4 w-4 mr-2"}),n("admin.quota-action")]}),e.jsxs(C,{onClick:()=>y(!0),children:[e.jsx(Ae,{className:"h-4 w-4 mr-2"}),n("admin.quota-set-action")]}),e.jsxs(C,{onClick:()=>P(!0),children:[e.jsx(na,{className:"h-4 w-4 mr-2"}),n("admin.subscription-action")]}),e.jsxs(C,{onClick:()=>V(!0),children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),n("admin.subscription-level")]}),e.jsxs(C,{onClick:()=>le(!0),children:[e.jsx(ta,{className:"h-4 w-4 mr-2"}),n("admin.release-subscription-action")]})]})]})]})}function pa(){const{t:a}=_(),{toast:s}=F(),[n,m]=c.useState({total:0,data:[]}),[l,g]=c.useState(0),[x,h]=c.useState(""),[o,t]=c.useState(!1);async function p(){t(!0);const i=await Re(l,x);t(!1),i.status?m(i):s({title:a("admin.error"),description:i.message})}return ae(p,[l]),e.jsxs("div",{className:"user-table",children:[e.jsxs("div",{className:"flex flex-row mb-6",children:[e.jsx(L,{className:"search",placeholder:a("admin.search-username"),value:x,onChange:i=>h(i.target.value),onKeyDown:async i=>{De(i)&&await p()}}),e.jsx(v,{size:"icon",className:"flex-shrink-0 ml-2",onClick:p,children:e.jsx(_e,{className:"h-4 w-4"})})]}),n.data&&n.data.length>0||l>0?e.jsxs(e.Fragment,{children:[e.jsxs(te,{children:[e.jsx(ie,{children:e.jsxs(E,{className:"select-none whitespace-nowrap",children:[e.jsx(d,{children:"ID"}),e.jsx(d,{children:a("admin.username")}),e.jsx(d,{children:a("admin.email")}),e.jsx(d,{children:a("admin.quota")}),e.jsx(d,{children:a("admin.used-quota")}),e.jsx(d,{children:a("admin.is-subscribed")}),e.jsx(d,{children:a("admin.level")}),e.jsx(d,{children:a("admin.total-month")}),e.jsx(d,{children:a("admin.expired-at")}),e.jsx(d,{children:a("admin.is-banned")}),e.jsx(d,{children:a("admin.is-admin")}),e.jsx(d,{children:a("admin.action")})]})}),e.jsx(ce,{children:(n.data||[]).map((i,y)=>e.jsxs(E,{children:[e.jsx(r,{children:i.id}),e.jsx(r,{className:"whitespace-nowrap",children:i.username}),e.jsx(r,{className:"whitespace-nowrap",children:i.email||"-"}),e.jsx(r,{children:i.quota}),e.jsx(r,{children:i.used_quota}),e.jsxs(r,{children:[a(i.is_subscribed.toString()),e.jsx(R,{className:"inline-block",content:a("admin.is-subscribed-tips")})]}),e.jsx(r,{className:"whitespace-nowrap",children:a(`admin.identity.${z[i.level]}`)}),e.jsx(r,{children:i.total_month}),e.jsx(r,{className:"whitespace-nowrap",children:i.expired_at||"-"}),e.jsx(r,{children:a(i.is_banned.toString())}),e.jsx(r,{children:a(i.is_admin.toString())}),e.jsx(r,{children:e.jsx(ua,{user:i,onRefresh:p})})]},y))})]}),e.jsx(Q,{current:l,total:n.total,onPageChange:g,offset:!0})]}):o?e.jsx("div",{className:"flex flex-col mb-4 mt-12 items-center",children:e.jsx(se,{className:"w-6 h-6 inline-block animate-spin"})}):e.jsx("div",{className:"empty",children:e.jsx("p",{children:a("admin.empty")})}),e.jsxs("div",{className:"user-action",children:[e.jsx("div",{className:"grow"}),e.jsx(v,{variant:"outline",size:"icon",onClick:p,children:e.jsx(ne,{className:"h-4 w-4"})})]})]})}function ha({update:a}){const{t:s}=_(),{toast:n}=F(),[m,l]=c.useState(!1),[g,x]=c.useState("5"),[h,o]=c.useState("1"),[t,p]=c.useState("");function i(N){return N.replace(/[^\d.]/g,"")}async function y(){const N=await sa(Number(g),Number(h));N.status?(p(N.data.join(`
`)),a()):n({title:s("admin.error"),description:N.message})}function k(){x("5"),o("1"),l(!1),p("")}function P(){return ve("code.txt",t)}return e.jsxs(e.Fragment,{children:[e.jsxs(A,{open:m,onOpenChange:l,children:[e.jsx(ge,{asChild:!0,children:e.jsx(v,{children:s("admin.generate")})}),e.jsxs(H,{children:[e.jsxs(B,{children:[e.jsx(U,{children:s("admin.generate")}),e.jsxs(G,{className:"pt-2",children:[e.jsxs("div",{className:"redeem-row",children:[e.jsx("p",{className:"mr-4",children:s("admin.quota")}),e.jsx(L,{value:g,onChange:N=>x(i(N.target.value))})]}),e.jsxs("div",{className:"redeem-row",children:[e.jsx("p",{className:"mr-4",children:s("admin.number")}),e.jsx(L,{value:h,onChange:N=>o(i(N.target.value))})]})]})]}),e.jsxs(K,{children:[e.jsx(v,{variant:"outline",onClick:()=>l(!1),children:s("admin.cancel")}),e.jsx(v,{variant:"default",loading:!0,onClick:y,children:s("admin.confirm")})]})]})]}),e.jsx(A,{open:t!=="",onOpenChange:N=>{N||k()},children:e.jsxs(H,{children:[e.jsxs(B,{children:[e.jsx(U,{children:s("admin.generate-result")}),e.jsx(G,{className:"pt-4",children:e.jsx(Ne,{value:t,rows:12,readOnly:!0})})]}),e.jsxs(K,{children:[e.jsx(v,{variant:"outline",onClick:k,children:s("close")}),e.jsxs(v,{variant:"default",onClick:P,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),s("download")]})]})]})})]})}function ja(){const{t:a}=_(),{toast:s}=F(),[n,m]=c.useState({total:0,data:[]}),[l,g]=c.useState(!1),[x,h]=c.useState(0);async function o(){g(!0);const t=await aa(x);g(!1),t.status?m(t):s({title:a("admin.error"),description:t.message})}return ae(o,[x]),e.jsxs("div",{className:"redeem-table",children:[n.data&&n.data.length>0||x>0?e.jsxs(e.Fragment,{children:[e.jsxs(te,{children:[e.jsx(ie,{children:e.jsxs(E,{className:"select-none whitespace-nowrap",children:[e.jsx(d,{children:a("admin.redeem.code")}),e.jsx(d,{children:a("admin.redeem.quota")}),e.jsx(d,{children:a("admin.used")}),e.jsx(d,{children:a("admin.created-at")}),e.jsx(d,{children:a("admin.used-at")}),e.jsx(d,{children:a("admin.action")})]})}),e.jsx(ce,{children:(n.data||[]).map((t,p)=>e.jsxs(E,{className:"whitespace-nowrap",children:[e.jsx(r,{children:t.code}),e.jsx(r,{children:e.jsx(I,{variant:"outline",children:t.quota})}),e.jsx(r,{children:e.jsx(Se,{state:t.used})}),e.jsx(r,{children:t.created_at}),e.jsx(r,{children:t.updated_at}),e.jsxs(r,{className:"flex gap-2",children:[e.jsx(xe,{size:"icon",variant:"outline",onClick:()=>ue(t.code),children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx(ye,{native:!0,tooltip:a("delete"),variant:"destructive",onClick:async()=>{const i=await ea(t.code);he(s,a,i,!0),i.status&&await o()},children:e.jsx(je,{className:"h-4 w-4"})})]})]},p))})]}),e.jsx(Q,{current:x,total:n.total,onPageChange:h,offset:!0})]}):l?e.jsx("div",{className:"flex flex-col my-4 items-center",children:e.jsx(se,{className:"w-6 h-6 inline-block animate-spin"})}):e.jsx("p",{className:"empty",children:a("admin.empty")}),e.jsxs("div",{className:"redeem-action",children:[e.jsx("div",{className:"grow"}),e.jsx(v,{variant:"outline",size:"icon",onClick:o,children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(ha,{update:o})]})]})}function ya(){const{t:a}=_();return e.jsxs("div",{className:q("user-interface",Be&&"mobile"),children:[e.jsxs(Z,{className:"admin-card",children:[e.jsx(Y,{className:"select-none",children:e.jsx(W,{children:a("admin.user")})}),e.jsx(X,{children:e.jsx(pa,{})})]}),e.jsxs(Z,{className:"admin-card",children:[e.jsx(Y,{className:"select-none",children:e.jsxs(W,{className:"flex items-center",children:[a("admin.invitation-manage"),e.jsx(R,{content:a("admin.invitation-tips"),className:"ml-2 h-6 w-6 translate-y-0.5"})]})}),e.jsx(X,{children:e.jsx(xa,{})})]}),e.jsxs(Z,{className:"admin-card",children:[e.jsx(Y,{className:"select-none",children:e.jsxs(W,{className:"flex items-center",children:[a("admin.invitation"),e.jsx(R,{content:a("admin.redeem-tips"),className:"ml-2 h-6 w-6 translate-y-0.5"})]})}),e.jsx(X,{children:e.jsx(ja,{})})]})]})}export{ya as default};
